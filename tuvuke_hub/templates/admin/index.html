{% extends "admin/index.html" %}
{% load static %}

{% block extrahead %}
{{ block.super }}
<style>
    .analytics-dashboard {
        background: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 20px;
        margin: 20px 0;
    }
    
    .analytics-title {
        color: #495057;
        font-size: 24px;
        font-weight: 600;
        margin-bottom: 20px;
        border-bottom: 2px solid #007bff;
        padding-bottom: 10px;
    }
    
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 20px;
    }
    
    .stat-card {
        background: white;
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 20px;
        text-align: center;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        transition: transform 0.2s ease-in-out;
    }
    
    .stat-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    }
    
    .stat-number {
        font-size: 36px;
        font-weight: bold;
        color: #007bff;
        display: block;
        margin-bottom: 8px;
    }
    
    .stat-label {
        font-size: 16px;
        color: #6c757d;
        font-weight: 500;
    }
    
    .stat-card.students .stat-number { color: #28a745; }
    .stat-card.scholarships .stat-number { color: #ffc107; }
    .stat-card.applications .stat-number { color: #dc3545; }
    .stat-card.providers .stat-number { color: #6f42c1; }
    .stat-card.disbursements .stat-number { color: #17a2b8; }
    .stat-card.counties .stat-number { color: #fd7e14; }
    
    .additional-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-top: 20px;
    }
    
    .stat-section {
        background: white;
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 15px;
    }
    
    .stat-section h4 {
        margin-top: 0;
        margin-bottom: 15px;
        color: #495057;
        border-bottom: 1px solid #dee2e6;
        padding-bottom: 8px;
    }
    
    .stat-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 0;
        border-bottom: 1px solid #f8f9fa;
    }
    
    .stat-item:last-child {
        border-bottom: none;
    }
    
    .stat-item-label {
        color: #6c757d;
        font-size: 14px;
    }
    
    .stat-item-value {
        font-weight: 600;
        color: #495057;
    }
    
    .refresh-note {
        text-align: center;
        color: #6c757d;
        font-size: 12px;
        font-style: italic;
        margin-top: 15px;
    }
</style>
{% endblock %}

{% block content %}
<div class="analytics-dashboard">
    <h2 class="analytics-title">ðŸ“Š Tuvuke Hub Analytics Dashboard</h2>
    
    <div class="stats-grid">
        <div class="stat-card students">
            <span class="stat-number">{{ analytics.total_students|default:0 }}</span>
            <span class="stat-label">Total Students</span>
        </div>
        
        <div class="stat-card scholarships">
            <span class="stat-number">{{ analytics.total_scholarships|default:0 }}</span>
            <span class="stat-label">Available Scholarships</span>
        </div>
        
        <div class="stat-card applications">
            <span class="stat-number">{{ analytics.total_applications|default:0 }}</span>
            <span class="stat-label">Total Applications</span>
        </div>
        
        <div class="stat-card providers">
            <span class="stat-number">{{ analytics.total_providers|default:0 }}</span>
            <span class="stat-label">Scholarship Providers</span>
        </div>
        
        <div class="stat-card disbursements">
            <span class="stat-number">KES {{ analytics.total_disbursed|floatformat:0|default:"0" }}</span>
            <span class="stat-label">Total Disbursed</span>
        </div>
        
        <div class="stat-card counties">
            <span class="stat-number">{{ analytics.counties_represented|default:0 }}</span>
            <span class="stat-label">Counties Represented</span>
        </div>
    </div>
    
    <div class="additional-stats">
        <div class="stat-section">
            <h4>Application Status Breakdown</h4>
            <div class="stat-item">
                <span class="stat-item-label">Submitted Applications</span>
                <span class="stat-item-value">{{ analytics.submitted_applications|default:0 }}</span>
            </div>
            <div class="stat-item">
                <span class="stat-item-label">Approved Applications</span>
                <span class="stat-item-value">{{ analytics.approved_applications|default:0 }}</span>
            </div>
            <div class="stat-item">
                <span class="stat-item-label">Under Review</span>
                <span class="stat-item-value">{{ analytics.under_review_applications|default:0 }}</span>
            </div>
            <div class="stat-item">
                <span class="stat-item-label">Success Rate</span>
                <span class="stat-item-value">{{ analytics.success_rate|floatformat:1|default:"0.0" }}%</span>
            </div>
        </div>
        
        <div class="stat-section">
            <h4>Scholarship Statistics</h4>
            <div class="stat-item">
                <span class="stat-item-label">Active Scholarships</span>
                <span class="stat-item-value">{{ analytics.active_scholarships|default:0 }}</span>
            </div>
            <div class="stat-item">
                <span class="stat-item-label">Verified Providers</span>
                <span class="stat-item-value">{{ analytics.verified_providers|default:0 }}</span>
            </div>
            <div class="stat-item">
                <span class="stat-item-label">Total Scholarship Value</span>
                <span class="stat-item-value">KES {{ analytics.total_scholarship_value|floatformat:0|default:"0" }}</span>
            </div>
            <div class="stat-item">
                <span class="stat-item-label">Average Award Amount</span>
                <span class="stat-item-value">KES {{ analytics.average_award|floatformat:0|default:"0" }}</span>
            </div>
        </div>
        
        <div class="stat-section">
            <h4>Student Demographics</h4>
            <div class="stat-item">
                <span class="stat-item-label">Verified Students</span>
                <span class="stat-item-value">{{ analytics.verified_students|default:0 }}</span>
            </div>
            <div class="stat-item">
                <span class="stat-item-label">Female Students</span>
                <span class="stat-item-value">{{ analytics.female_students|default:0 }} ({{ analytics.female_percentage|floatformat:1|default:"0.0" }}%)</span>
            </div>
            <div class="stat-item">
                <span class="stat-item-label">Students with Disabilities</span>
                <span class="stat-item-value">{{ analytics.disabled_students|default:0 }}</span>
            </div>
            <div class="stat-item">
                <span class="stat-item-label">Orphaned Students</span>
                <span class="stat-item-value">{{ analytics.orphaned_students|default:0 }}</span>
            </div>
        </div>
        
        <div class="stat-section">
            <h4>Recent Activity</h4>
            <div class="stat-item">
                <span class="stat-item-label">New Students (Last 30 days)</span>
                <span class="stat-item-value">{{ analytics.new_students_month|default:0 }}</span>
            </div>
            <div class="stat-item">
                <span class="stat-item-label">New Applications (Last 30 days)</span>
                <span class="stat-item-value">{{ analytics.new_applications_month|default:0 }}</span>
            </div>
            <div class="stat-item">
                <span class="stat-item-label">New Scholarships (Last 30 days)</span>
                <span class="stat-item-value">{{ analytics.new_scholarships_month|default:0 }}</span>
            </div>
            <div class="stat-item">
                <span class="stat-item-label">Total Disbursements (Last 30 days)</span>
                <span class="stat-item-value">KES {{ analytics.disbursements_month|floatformat:0|default:"0" }}</span>
            </div>
        </div>
    </div>
    
    <p class="refresh-note">
        Statistics are updated in real-time. Last refreshed: {{ analytics.last_updated|date:"F j, Y, g:i A" }}
    </p>
</div>

{{ block.super }}
{% endblock %}
